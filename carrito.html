<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito - VELATO</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="max-w-3xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Carrito de Compras</h1>

    <div id="carrito" class="bg-white p-4 rounded shadow mb-8">
      <h2 class="text-xl font-semibold mb-4">Resumen de Productos</h2>
      <ul id="lista-carrito" class="space-y-2"></ul>
      <p class="mt-4 font-bold">Total: €<span id="total"></span></p>
    </div>

    <form id="formulario-envio" action="https://formspree.io/f/meoadano" method="POST" class="bg-white p-6 rounded shadow space-y-4">
      <h2 class="text-xl font-semibold">Datos de Envío</h2>
      <input type="text" name="nombre" placeholder="Nombre completo" required class="w-full border p-2 rounded">
      <input type="email" name="email" placeholder="Correo electrónico" required class="w-full border p-2 rounded">
      <input type="text" name="direccion" placeholder="Dirección" required class="w-full border p-2 rounded">
      <input type="text" name="ciudad" placeholder="Ciudad" required class="w-full border p-2 rounded">
      <input type="text" name="codigo_postal" placeholder="Código Postal" required class="w-full border p-2 rounded">
      <input type="hidden" name="pedido" id="pedidoInput">
      <button type="submit" class="bg-black text-white px-4 py-2 rounded hover:bg-gray-800">Finalizar Pedido</button>
    </form>
  </div>

  <script>
    const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
    const lista = document.getElementById("lista-carrito");
    const total = document.getElementById("total");
    const pedidoInput = document.getElementById("pedidoInput");

    let totalPrecio = 0;
    let resumen = "";

    carrito.forEach(producto => {
      const item = document.createElement("li");
      item.textContent = `${producto.name} - €${producto.price.toFixed(2)}`;
      lista.appendChild(item);
      totalPrecio += producto.price;
      resumen += `${producto.name} (€${producto.price.toFixed(2)})\n`;
    });

    total.textContent = totalPrecio.toFixed(2);
    pedidoInput.value = resumen + `\nTotal: €${totalPrecio.toFixed(2)}`;
  </script>
</body>
</html>
